# extract.sh

## Описание
Скрипт `extract.sh` предназначен для извлечения и минификации всех файлов из указанной директории проекта, с последующим их объединением в один сжатый файл (`.txt.gz`). Скрипт поддерживает игнорирование определённых файлов или паттернов, а также возможность указать пользовательскую выходную директорию.

---

## Установка
1. Сохраните скрипт в файл с именем `extract.sh`.
2. Дайте файлу права на выполнение:
   ```bash
   chmod +x extract.sh
   ```

---

## Использование

### Базовый синтаксис
```bash
./extract.sh <путь_к_проекту> [--output <директория>] [--ignore паттерн1 паттерн2 ...]
```

- `<путь_к_проекту>`: Путь к директории проекта, содержимое которой нужно обработать.
- `--output <директория>`: Необязательный параметр для указания директории, куда будет сохранён результат. По умолчанию используется та же директория, что и проект.
- `--ignore паттерн1 паттерн2 ...`: Необязательный параметр для игнорирования файлов, соответствующих указанным паттернам.

---

## Примеры использования

### Пример 1: Обработка всего проекта без дополнительных параметров
```bash
./extract.sh /path/to/project
```
- Все файлы из `/path/to/project` будут обработаны, минифицированы и сохранены в файл `/path/to/project.txt.gz`.

---

### Пример 2: Обработка с указанием выходной директории
```bash
./extract.sh /path/to/project --output /path/to/output
```
- Результат будет сохранён в `/path/to/output/project.txt.gz`.

---

### Пример 3: Обработка с игнорированием определённых файлов
```bash
./extract.sh /path/to/project --ignore *node_modules/ .env 
```
- Все файлы с расширением `.env` и всё содержимое директории `node_modules/` будут проигнорированы при обработке.

---

### Пример 4: Комбинированный пример
```bash
./extract.sh /path/to/project --output /path/to/output --ignore *.log temp/ *.tmp
```
- Файлы с расширением `.log`, содержимое директории `temp/` и все файлы с расширением `.tmp` будут проигнорированы. Результат будет сохранён в `/path/to/output/project.txt.gz`.

---

## Как работает скрипт?

1. **Минификация файлов**:
   - Удаляются комментарии, лишние пробелы, табуляции и переносы строк.
   - Каждый файл минифицируется перед записью в выходной файл.

2. **Игнорирование файлов**:
   - Поддерживаются паттерны в стиле shell (например, `*.log`, `temp/`, `*.tmp`).
   - Паттерны могут быть как для отдельных файлов, так и для целых директорий.

3. **Объединение файлов**:
   - В выходной файл записываются пути к файлам и их минифицированное содержимое.
   - Формат записи: 
     ```
     путь_к_файлу
     минифицированное_содержимое_файла
     
     ```

4. **Сжатие результата**:
   - Финальный файл сжимается с помощью gzip и сохраняется в формате `.txt.gz`.

---

## Зависимости
- `bash`
- `sed`
- `tr`
- `find`
- `gzip`
- `mktemp`

Убедитесь, что эти утилиты установлены в вашей системе.

---

## Примечания
- Скрипт рекурсивно обходит все файлы в указанной директории.
- Для игнорирования директорий используйте паттерны, заканчивающиеся на `/` (например, `temp/`).
- Если выходная директория не существует, она будет создана автоматически.

---

```